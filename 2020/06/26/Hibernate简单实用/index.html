<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Hibernate简单使用 | 皮之鲲</title><meta name="description" content="Hibernate的简单使用Hibernate简介Hibernate是封装了JDBC的一种开放源代码的对象&#x2F;关系映射(ORM Object-Relation Mapping)框架，使程序员可以使用面向对象的思想来操作数据库。 Hibernate是一种对象&#x2F;关系映射的解决方案，即将Java对象与对象之间的关系映射到数据库中表与表之间的关系。 以对象为核心，Hibernate会将表对对象之间的关系映射"><meta name="keywords" content="Hibernate"><meta name="author" content="皮皮鲲"><meta name="copyright" content="皮皮鲲"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Hibernate简单使用"><meta name="twitter:description" content="Hibernate的简单使用Hibernate简介Hibernate是封装了JDBC的一种开放源代码的对象&#x2F;关系映射(ORM Object-Relation Mapping)框架，使程序员可以使用面向对象的思想来操作数据库。 Hibernate是一种对象&#x2F;关系映射的解决方案，即将Java对象与对象之间的关系映射到数据库中表与表之间的关系。 以对象为核心，Hibernate会将表对对象之间的关系映射"><meta name="twitter:image" content="http://yoursite.com/img/hibernate.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Hibernate简单使用"><meta property="og:url" content="http://yoursite.com/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/"><meta property="og:site_name" content="皮之鲲"><meta property="og:description" content="Hibernate的简单使用Hibernate简介Hibernate是封装了JDBC的一种开放源代码的对象&#x2F;关系映射(ORM Object-Relation Mapping)框架，使程序员可以使用面向对象的思想来操作数据库。 Hibernate是一种对象&#x2F;关系映射的解决方案，即将Java对象与对象之间的关系映射到数据库中表与表之间的关系。 以对象为核心，Hibernate会将表对对象之间的关系映射"><meta property="og:image" content="http://yoursite.com/img/hibernate.jpg"><meta property="article:published_time" content="2020-06-26T07:18:07.000Z"><meta property="article:modified_time" content="2020-06-26T07:37:44.000Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = 'false'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/"><link rel="prev" title="Struts简单使用" href="http://yoursite.com/2020/06/26/Struts%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"><link rel="next" title="软件测试执行阶段" href="http://yoursite.com/2020/06/20/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%89%A7%E8%A1%8C%E9%98%B6%E6%AE%B5/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xzlaptt.github.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"I,LOVE,YOU,PTT","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: true
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="皮之鲲" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3945717872,376264621&amp;fm=15&amp;gp=0.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fa fa-picture-o"></i><span> 照片</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hibernate的简单使用"><span class="toc-number">1.</span> <span class="toc-text">Hibernate的简单使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate简介"><span class="toc-number">1.1.</span> <span class="toc-text">Hibernate简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate入门案例"><span class="toc-number">1.2.</span> <span class="toc-text">Hibernate入门案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hibernate的增删改查的操作"><span class="toc-number">1.2.1.</span> <span class="toc-text">hibernate的增删改查的操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate的Transaction接口"><span class="toc-number">1.3.</span> <span class="toc-text">Hibernate的Transaction接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate的dao层"><span class="toc-number">1.4.</span> <span class="toc-text">Hibernate的dao层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate实体关系映射"><span class="toc-number">1.5.</span> <span class="toc-text">Hibernate实体关系映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多对一关系"><span class="toc-number">1.5.1.</span> <span class="toc-text">多对一关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一对多关系"><span class="toc-number">1.5.2.</span> <span class="toc-text">一对多关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一对多双向关联"><span class="toc-number">1.5.3.</span> <span class="toc-text">一对多双向关联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多对多关系"><span class="toc-number">1.5.4.</span> <span class="toc-text">多对多关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HQL语言"><span class="toc-number">1.6.</span> <span class="toc-text">HQL语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hibernate的注解开发"><span class="toc-number">1.7.</span> <span class="toc-text">Hibernate的注解开发</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div class="post-bg" id="nav" style="background-image: url(/../img/hibernate.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">皮之鲲</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fa fa-picture-o"></i><span> 照片</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Hibernate简单使用</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-06-26 15:18:07"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-26</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-26 15:37:44"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-26</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="Hibernate的简单使用"><a href="#Hibernate的简单使用" class="headerlink" title="Hibernate的简单使用"></a>Hibernate的简单使用</h1><h2 id="Hibernate简介"><a href="#Hibernate简介" class="headerlink" title="Hibernate简介"></a>Hibernate简介</h2><p>Hibernate是封装了<strong>JDBC</strong>的一种开放源代码的<strong>对象/关系映射</strong>(ORM Object-Relation Mapping)框架，使程序员可以使用面向对象的思想来操作数据库。</p>
<p>Hibernate是一种对象/关系映射的解决方案，即将Java对象与对象之间的关系映射到数据库中表与表之间的关系。</p>
<p>以对象为核心，Hibernate会将表对对象之间的关系映射为表与表之间的关系。</p>
<p>Hibernate可以作为应用的数据访问层或持久层。</p>
<p>Hibernate的目标是成为Java中管理数据持久性问题的一种完整解决方案。它协调应用程序与关系型数据库的交互，让开发者解放出来专注于项目的业务逻辑问题。</p>
<h2 id="Hibernate入门案例"><a href="#Hibernate入门案例" class="headerlink" title="Hibernate入门案例"></a>Hibernate入门案例</h2><p>1.先创建数据库以及数据库的相关表，添加数据等。</p>
<p>2.创建工程之后，先导入先关的Jar包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">antlr-<span class="number">2.7</span><span class="number">.6</span>.jar</span><br><span class="line">commons-collections-<span class="number">3.1</span>.jar</span><br><span class="line">commons-logging-<span class="number">1.1</span><span class="number">.1</span>.jar</span><br><span class="line">commons-logging-api-<span class="number">1.1</span>.jar</span><br><span class="line">dom4j-<span class="number">1.6</span><span class="number">.1</span>.jar</span><br><span class="line">ehcache-<span class="number">1.2</span><span class="number">.4</span>.jar</span><br><span class="line">hibernate-jpa-<span class="number">2.0</span>-api-<span class="number">1.0</span><span class="number">.1</span>.Final.jar</span><br><span class="line">hibernate3.jar</span><br><span class="line">javassist-<span class="number">3.12</span><span class="number">.0</span>.GA.jar</span><br><span class="line">jta-<span class="number">1.1</span>.jar</span><br><span class="line">mysql-connector-java-<span class="number">5.0</span><span class="number">.8</span>-bin.jar</span><br><span class="line">slf4j-api-<span class="number">1.6</span><span class="number">.1</span>.jar</span><br></pre></td></tr></table></figure>

<p>3.创建与表相关联的javabean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">	<span class="comment">//此处省略相关属性的set和get方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.书写映射文件(就是对象与表之间的映射)，位置必须是和javabean在同一个包下面，并且名称必须是：javabeanName.hbm.xml(javabeanName就是javabean类的类名)，实例如下图所示：</p>
<p><img src="/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/1593156690500.png" alt="hibernate映射文件位置"></p>
<p>映射文件的代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> </span></span><br><span class="line"><span class="meta">    <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--package:就是javabean的包名称--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span> = <span class="string">"com.hiber.pojo"</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- name:就是javabean的名称 table:映射的表名称  --&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span> = <span class="string">"Product"</span> <span class="attr">table</span> = <span class="string">"product_"</span>&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!-- id:定义主键 --&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span> = <span class="string">"id"</span> <span class="attr">column</span> = <span class="string">"id"</span>&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!--主键生成策略--&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span> = <span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!-- 普通的属性可以省略column(当数据库中的数据和javabean中的属性名称一样的时候)--&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">"name"</span>/&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">"price"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5.创建hibernate的配置文件,位置在src下面，名称必须为：hibernate.cfg.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-configuration</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 连接驱动 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.driver_class"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 连接地址 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/ahibertest1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 数据库的名称 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 数据库的密码 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.password"</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 确定数据库的方言（sql,SQLServer...） --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--在控制台 显示sql语句 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--如果你没有数据表，Hibernate会根据映射文件自动的创建数据表--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 将映射文件放入配置文件中 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>= <span class="string">"com/hiber/pojo/Product.hbm.xml"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>映射文件和配置文件的头文件都需要去jar包下寻找：</p>
<p><img src="/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/1593156874287.png" alt="头文件所在的jar包"></p>
<p><img src="/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/1593156998608.png" alt="头文件"></p>
<p>6.创建测试类，实现hibernate的基本的操作</p>
<p>Session对象是Hibernate技术的核心。持久化对象的生命周期、事务的管理和持久化对象的查询、更新和利除都是通过Session对象来完成的。Hibernate在操作数据库之前必须先取得Session对象，相当于JDBC在操作数据库之前必须先取得Connection对象一样.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TextHibernate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 创建Configuration对象，引用配置文件</span></span><br><span class="line">		Configuration cfg=<span class="keyword">new</span> Configuration().configure(<span class="string">"hibernate.cfg.xml"</span>);</span><br><span class="line">		<span class="comment">//利用Configuration对象创建sesionFactory对象(session工厂)</span></span><br><span class="line">		SessionFactory sf=cfg.buildSessionFactory();</span><br><span class="line">		<span class="comment">//利用sessionFactory创建session对象</span></span><br><span class="line">		Session s=sf.openSession();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//通过session开启事务(如果对于数据库中的数据做出一些更改，最好将这些事情放在数据管理中)</span></span><br><span class="line">		s.beginTransaction();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//创建对象</span></span><br><span class="line">		Product p=<span class="keyword">new</span> Product();</span><br><span class="line">		p.setName(<span class="string">"C#"</span>);</span><br><span class="line">		p.setPrice(<span class="number">56</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//将上面的对象数据插入到数据库中</span></span><br><span class="line">		s.save(p);</span><br><span class="line">		<span class="comment">//事务的提交</span></span><br><span class="line">		s.getTransaction().commit();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//资源的关闭</span></span><br><span class="line">		s.close();</span><br><span class="line">		sf.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样最基本的hibernate就做出来了。启动程序之后项目会将p对象转化为数据，并插入到指定的表中。</p>
<h3 id="hibernate的增删改查的操作"><a href="#hibernate的增删改查的操作" class="headerlink" title="hibernate的增删改查的操作"></a>hibernate的增删改查的操作</h3><p>在这直接通过最直观的代码进行展示，前提是先创建了Configuration,然后再创建了sessionFactory，然后创建session对象，这样就可以执行下面的操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">      <span class="comment">//查询</span></span><br><span class="line"><span class="comment">//从数据库中查询数据(get【通过主键进行获取】)</span></span><br><span class="line">Product p=(Product)s.get(Product<span class="class">.<span class="keyword">class</span>, 11)</span>;</span><br><span class="line">System.out.println(p.getName());</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除数据</span></span><br><span class="line"><span class="comment">//1.先从数据库中获取相应的对象（数据）</span></span><br><span class="line">Product p1=(Product)s.get(Product<span class="class">.<span class="keyword">class</span>, 10)</span>;</span><br><span class="line"><span class="comment">//2.删除</span></span><br><span class="line">s.delete(p1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新某个数据</span></span><br><span class="line"><span class="comment">//1.先从数据库中获取相应的对象（数据）</span></span><br><span class="line">Product p2=(Product)s.get(Product<span class="class">.<span class="keyword">class</span>,9)</span>;</span><br><span class="line"><span class="comment">//2.更新数据</span></span><br><span class="line">p2.setName(<span class="string">"C++"</span>);</span><br><span class="line"><span class="comment">//3.更新数据库</span></span><br><span class="line">s.update(p2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加</span></span><br><span class="line"><span class="comment">//1.先创建一个对象</span></span><br><span class="line">Product p3=<span class="keyword">new</span> Product();</span><br><span class="line"><span class="comment">//2.为这些对象添加一些数据</span></span><br><span class="line">p3.setName(<span class="string">"C#"</span>);</span><br><span class="line">p3.setPrice(<span class="number">56</span>);</span><br><span class="line"><span class="comment">//将这个对象添加到数据库中</span></span><br><span class="line">s.save(p3);</span><br></pre></td></tr></table></figure>

<h2 id="Hibernate的Transaction接口"><a href="#Hibernate的Transaction接口" class="headerlink" title="Hibernate的Transaction接口"></a>Hibernate的Transaction接口</h2><p>数据库事务(Database Transaction)。是指作为单个逻辑工作单元执行的一系列操作，要么完全地执行，要么完全地不执行。事务处理可以确保事务性单元内的所有操作都成功完成，否则不会更新面向数据的资源。通过将一组相关操作组合为一个要么全部成功，要么全部失败的单元，可以简化错误恢复井使应用程序更加可靠。</p>
<p>Transaction常用的方法：</p>
<ul>
<li>commit():提交相关关联的Sesion实例</li>
<li>rollback():撤销事务操作</li>
<li>wasCommitted():检查事务是否提交</li>
</ul>
<h2 id="Hibernate的dao层"><a href="#Hibernate的dao层" class="headerlink" title="Hibernate的dao层"></a>Hibernate的dao层</h2><p>Hibernate的PO对象有三种状态:临时状态又称临时态、持久状态又称持久态和托管状态又称脱管态。处于持久态的对象也称为PO,临时对象和脱管对象也称为Vo (Value Object)。</p>
<p><strong>临时态(瞬时态)</strong></p>
<p>由new命令开辟内存空间刚生成的Java对象处于临时态。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br></pre></td></tr></table></figure>

<p><strong>持久态</strong></p>
<p>在Hibernate中， 临时态可通过session的save()方法将临时对象与数据库相关联，并将数据对应的插入数据库中，此时该临时对象转变成持久化对象。处于该状态的对象在数据库中具有对应的记录，并拥有一一个持久化标识。如果是用Hibernate的delete()方法，对应的持久对象就变成临时对象，因数据库中的对应数据已被删除，该对象不再与数据库的记录关联。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">临时态就可以转化为持久态</span><br><span class="line">session.save(user);</span><br></pre></td></tr></table></figure>

<p>持久态的特点：</p>
<p>1.和session实例关联<br>2.在数据库中有数据与之关联的记录</p>
<p><strong>脱管态</strong></p>
<p>当一个session执行close()或clear()、evict()之后。持久对象变成脱管对象，此时持久对象会变成脱管对象，此时该对象虽然具有数据库识别值，但它已不在Hibernate持久层的管理之下。</p>
<p>当与某持久对象关联的session被关闭后，该持久对象转变为脱管对象。当脱管对象被重新关联到session上时，并再次转变成持久对象。</p>
<p>脱管对象拥有数据库的识别值， 可通过update()等方法，转变成持久对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session.close()</span><br><span class="line">sessionFactory.close()</span><br></pre></td></tr></table></figure>

<p>脱管对象具有如下特点: .<br>本质上与临时对象相同，在没有任何变量引用它时，JVM会在适当的时候将它收回，比临时对象多了一个数据库记录标识值。</p>
<p>将测试中的增删改查可以直接封装到一个dao类中，直接通过对象调用方法直接进行对于数据库的处理</p>
<p>1.先创建dao层(在这值是创建了增加和查询两个方法)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 插入数据</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> p</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Product p)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		Transaction tran=<span class="keyword">null</span>;</span><br><span class="line">		SessionFactory sf= <span class="keyword">new</span> Configuration().configure().buildSessionFactory();</span><br><span class="line">		Session s=sf.openSession();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//开启事务管理</span></span><br><span class="line">			tran=s.beginTransaction();</span><br><span class="line">			<span class="comment">//插入数据</span></span><br><span class="line">			s.save(p);</span><br><span class="line">			<span class="comment">//如果正常就提交数据</span></span><br><span class="line">			tran.commit();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">//如果失败就进行回滚</span></span><br><span class="line">			<span class="keyword">if</span> (tran!=<span class="keyword">null</span>) &#123;</span><br><span class="line">				tran.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//将错误信息进行展示</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="comment">//关闭资源</span></span><br><span class="line">			s.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询方法(查询可以没有事务)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		Product result = <span class="keyword">null</span>;</span><br><span class="line">		SessionFactory sf= <span class="keyword">new</span> Configuration().configure().buildSessionFactory();</span><br><span class="line">		Session s=sf.openSession();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//获取数据</span></span><br><span class="line">			result = (Product)s.get(Product<span class="class">.<span class="keyword">class</span>, <span class="title">id</span>)</span>;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			s.close();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.在主函数中直接创建相关的对象并调用方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Text</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Text text=<span class="keyword">new</span> Text();</span><br><span class="line">		text.testAdd();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Product p=<span class="keyword">new</span> Product();</span><br><span class="line">		p.setName(<span class="string">"JavaWeb"</span>);</span><br><span class="line">		p.setPrice(<span class="number">100</span>);</span><br><span class="line">		<span class="comment">//创建dao层对象</span></span><br><span class="line">		ProductDao pDao=<span class="keyword">new</span> ProductDao();</span><br><span class="line">		<span class="comment">//调用方法实现数据的添加</span></span><br><span class="line">		pDao.add(p);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Hibernate实体关系映射"><a href="#Hibernate实体关系映射" class="headerlink" title="Hibernate实体关系映射"></a>Hibernate实体关系映射</h2><h3 id="多对一关系"><a href="#多对一关系" class="headerlink" title="多对一关系"></a>多对一关系</h3><p>比如：书籍和出版社，一个出版社有很多的书，而一个书只能有一家出版社出版。从书的角度出发就是多对一的关系。</p>
<p>实例：</p>
<p>1.在数据库中新建数据库，创建数据表(book表和publisher表)</p>
<p>2.新建项目，创建相应的javabean，在一对多的关系中多的方要包含一的对象</p>
<p>book类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	String name;</span><br><span class="line">	<span class="keyword">float</span> price;</span><br><span class="line">	<span class="comment">//出版社</span></span><br><span class="line">	Publisher publisher;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>publisher类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	String name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.针对这两个类创建相应的映射文件</p>
<p>Book.hbm.xml：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-configuration</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.hiber.pojo"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将属性和数据表中的元素相对应--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"Book"</span> <span class="attr">table</span>=<span class="string">"book_"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"price"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 建立多对一的关系</span></span><br><span class="line"><span class="comment">		这个要建立在多的一方 </span></span><br><span class="line"><span class="comment">		name:需要关联的属性</span></span><br><span class="line"><span class="comment">		calss:需要关联的类名称</span></span><br><span class="line"><span class="comment">		column：外键</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"publisher"</span> <span class="attr">class</span>=<span class="string">"Publisher"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Publisher.hbm.xml：<br>在一的这个啥都不需要加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-configuration</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">hibernate-maping</span> <span class="attr">package</span> = <span class="string">"com.hiber.pojo"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span> = <span class="string">"Publisher"</span> <span class="attr">table</span> = <span class="string">"publisher"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">hibernate-maping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.在将这两个配置文件添加到hibernate的配置文件中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 将映射文件放入配置文件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>= <span class="string">"com/hiber/pojo/Product.hbm.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>= <span class="string">"com/hiber/pojo/Publisher.hbm.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>= <span class="string">"com/hiber/pojo/Book.hbm.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样多对一的映射就已经完成了，就可以在需要的时候进行相应的处理。</p>
<h3 id="一对多关系"><a href="#一对多关系" class="headerlink" title="一对多关系"></a>一对多关系</h3><p>其实一对多和多对一其实是相反的，就像上面的多对一的实例，反过来从出版社看就是一对多的关系。</p>
<p>修改多对一的案例，实现一对多(下面只介绍修改的地方)：</p>
<p>1.去掉Book类中的Publisher属性，在Publisher类中添加Book集合实现一对多</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Book&gt; books  = <span class="keyword">new</span> HashSet();</span><br></pre></td></tr></table></figure>

<p>2.去掉book映射类中的多对一的关系，在publisher映射类中实现一对多</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- lazy:是否延迟加载(true:延迟加载，false:立即加载) </span></span><br><span class="line"><span class="comment">		延迟加载：不立即取得这个属性，只有在需要的时候才获取</span></span><br><span class="line"><span class="comment">		立即加载：在取得这个publisher的时候，就立即加载Books属性</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span> = <span class="string">"books"</span> <span class="attr">lazy</span> = <span class="string">"falswe"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span> = <span class="string">"pid"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span> = <span class="string">"Book"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其他的它多对一的没有变化，这样就实现了一对多的关系。</p>
<h3 id="一对多双向关联"><a href="#一对多双向关联" class="headerlink" title="一对多双向关联"></a>一对多双向关联</h3><p>一对多和多对一其实就是从不同的角度去看两个事物的关系，那么可不可以两个同时成立呢，这个就是一对多双向关联。</p>
<p>案例：</p>
<p>1.在多的一方添加一的一方的对象变量，在一的一方添加多的一方的集合变量，比如在Book中添加Publisher对象，在Publisher中添加Set<Book>这个集合</Book></p>
<p>2.在多的一方的映射文件中添加many-to-one：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 多的一方 </span></span><br><span class="line"><span class="comment">	name:需要关联的属性</span></span><br><span class="line"><span class="comment">	calss:需要关联的类名称</span></span><br><span class="line"><span class="comment">	column：外键</span></span><br><span class="line"><span class="comment">	insert:允许publisher属性插入</span></span><br><span class="line"><span class="comment">	update：允许publisher属性更新</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"publisher"</span> <span class="attr">class</span>=<span class="string">"Publisher"</span> <span class="attr">column</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">insert</span>=<span class="string">"true"</span> <span class="attr">update</span> = <span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在一的一方添加set:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- lazy:是否延迟加载(true:延迟加载，false:立即加载) </span></span><br><span class="line"><span class="comment">		延迟加载：不立即取得这个属性，只有在需要的时候才获取</span></span><br><span class="line"><span class="comment">		立即加载：在取得这个publisher的时候，就立即加载Books属性</span></span><br><span class="line"><span class="comment">		inverse（反转）:建立双向管理，这两个表的地位是一个上级一个下级，需要有一个</span></span><br><span class="line"><span class="comment">		控制另一个，true:就是将权利交出去，由另一个类控制，称为被动方。false则相反</span></span><br><span class="line"><span class="comment">		cascade:级联关系，如果主动方执行了某一个操作，那么被动方也执行操作。</span></span><br><span class="line"><span class="comment">		save-update：插入和更新都同步执行</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span> = <span class="string">"books"</span> <span class="attr">lazy</span> = <span class="string">"falswe"</span> <span class="attr">inverse</span>=<span class="string">"true"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span> = <span class="string">"pid"</span>/&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span> = <span class="string">"Book"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="多对多关系"><a href="#多对多关系" class="headerlink" title="多对多关系"></a>多对多关系</h3><p>多对多的关系比如学生和课程（一个学生要上很多的课，一个课程会有很多的学生）</p>
<p>类比一对多和多对一的关系，多对多的关系需要在映射文件中添加<many-to-many>元素。</many-to-many></p>
<p>在多对多的时候一般通过第三方中介表将两个多对多的联系起来，形成两个一对多的关联。</p>
<p>案例：通过User(用户)和商品(Product)</p>
<p>1.先创建两个表对应的javabean</p>
<p>User:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Set&lt;Product&gt; products;</span><br><span class="line">	<span class="comment">//省略get和set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Product:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">	<span class="keyword">private</span> Set&lt;User&gt; users;</span><br><span class="line">		<span class="comment">//省略get和set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.创建两个表的映射文件：</p>
<p>Product.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> </span></span><br><span class="line"><span class="meta">    <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span> = <span class="string">"com.hiber.pojo"</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- name:就是javabean的名称 table:映射的表名称  --&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span> = <span class="string">"Product"</span> <span class="attr">table</span> = <span class="string">"product_"</span>&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!-- id:定义主键 --&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span> = <span class="string">"id"</span> <span class="attr">column</span> = <span class="string">"id"</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span> = <span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!-- 普通的属性可以省略column --&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">"name"</span>/&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">"price"</span>/&gt;</span></span><br><span class="line">    		</span><br><span class="line">    		<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    		    name:在对应的javabean中另一个类的属性名称</span></span><br><span class="line"><span class="comment">    			table:第三方表的名字</span></span><br><span class="line"><span class="comment">    		 --&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"users"</span> <span class="attr">table</span> = <span class="string">"user_product"</span> <span class="attr">lazy</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!-- 与第三方表中的外键 --&gt;</span></span><br><span class="line">    			<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"pid"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    			<span class="comment">&lt;!-- many-to-many:建立多对多的关联 --&gt;</span></span><br><span class="line">    			<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">class</span> = <span class="string">"User"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>User.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span> </span></span><br><span class="line"><span class="meta">    <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User"</span> <span class="attr">table</span>=<span class="string">"user_"</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span> = <span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    	</span><br><span class="line">    	<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"product"</span> <span class="attr">table</span>=<span class="string">"user_products"</span> <span class="attr">lazy</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">column</span>=<span class="string">"pid"</span> <span class="attr">class</span>=<span class="string">"Product"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    	</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样就实现了多对多的关联，在需要的时候可以进行使用。</p>
<h2 id="HQL语言"><a href="#HQL语言" class="headerlink" title="HQL语言"></a>HQL语言</h2><p>Hibernate Query Language(HQL)提供了十分强大的功能，推荐大家使用这种查询方式。HQL具有与SQL语言类似的语法规范，只不过SQL是针对表中字段进行查询，而HQL是针对持久化对象，它用来取得对象，而不进行update,delete和insert等操作。而且HQL是完全面向对象的，具备继承、多态和关联等特性。</p>
<p><strong>from子句</strong></p>
<p>from子句是最简单的HQL语句，例如，from Book,也可以写为select b from Book b.它简单地返回Book类的所有实例。</p>
<p>除了Java类和属性的名称外，HQL语句对大小写并不敏感，所以在上一句HQL语句中，from与FROM是相同的，但是Book与book就不同了，所以上述语句写成from book就会报错。下列程序代码说明如何通过执行from语句取得所有的Book对象。</p>
<p>实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	SessionFactory sessionFactory = <span class="keyword">new</span> Configuration().configure().buildSessionFactory();</span><br><span class="line">	Session session = sessionFactory.openSession();</span><br><span class="line">	<span class="comment">//根据相应的语句进行查询</span></span><br><span class="line">	Query query =  session.createQuery(<span class="string">"from Book"</span>);</span><br><span class="line">	<span class="comment">//将查询的结果放到集合中</span></span><br><span class="line">	List&lt;Book&gt; books = query.list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>select子句</strong></p>
<p>有时 并不需要得到对象的所有属性，这时可以使用select子句进行属性查询，例如:</p>
<p>select books.name,books.price from Book as books</p>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SessionFactory sessionFactory = <span class="keyword">new</span> Configuration().configure().buildSessionFactory();</span><br><span class="line">		Session session = sessionFactory.openSession();</span><br><span class="line">		String hql = <span class="string">"select books.name,books.price from Book as books"</span>;</span><br><span class="line">		<span class="comment">//根据相应的语句进行查询</span></span><br><span class="line">		Query query =  session.createQuery(hql);</span><br><span class="line">		<span class="comment">//将查询的结果放到集合中</span></span><br><span class="line">		List&lt;Book&gt; books = query.list();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><strong>where子句</strong></p>
<p> HQL也支持子查询，它通过where子句实现这一机制。where子句可以让用户缩小要返回的实例的列表范.</p>
<p> 例如:Query q=s.createQuery(from Book b where b.name=’Java EE”); 返回书名为JavaEE的书的信息。</p>
<p> 模糊查询(like):</p>
<p> 实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">where</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SessionFactory sessionFactory = <span class="keyword">new</span> Configuration().configure().buildSessionFactory();</span><br><span class="line">		Session session = sessionFactory.openSession();</span><br><span class="line">		String hql = <span class="string">"from Book books where books.name like ?"</span>;</span><br><span class="line">		<span class="comment">//根据相应的语句进行查询</span></span><br><span class="line">		Query query =  session.createQuery(hql);</span><br><span class="line">		<span class="comment">//给语句中的?进行赋值（所有带有java的全部查询出来）</span></span><br><span class="line">		query.setString(<span class="number">0</span>, <span class="string">"%java%"</span>);</span><br><span class="line">		<span class="comment">//将查询的结果放到集合中</span></span><br><span class="line">		List&lt;Book&gt; books = query.list();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Hibernate的注解开发"><a href="#Hibernate的注解开发" class="headerlink" title="Hibernate的注解开发"></a>Hibernate的注解开发</h2><p>在实体类中进行注解：</p>
<p>1.类注解</p>
<ul>
<li>@Entity表示一个实体类，用于映射表</li>
<li>@Table(name = “tableName”)表示这是一个类，映射到的表名为tableName</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"product_"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>2.属性注解</p>
<p>一般写在该属性的get方法上面</p>
<ul>
<li>@id表示主键</li>
<li>@GeneratedValue(strategy = GenerationType.IDENTITY)表示自增长方式使用mysql自带的</li>
<li>@Column(name = “name”)表示映射到表中的字段名称</li>
</ul>
<p>实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//主键</span></span><br><span class="line">   <span class="meta">@Id</span></span><br><span class="line"><span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"id"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"name"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后在Hibernate的配置文件中删除映射文件的配置，直接将类加入到映射文件中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapping <span class="class"><span class="keyword">class</span> </span>= <span class="string">"com.hiber.pojo.Product"</span>/&gt;</span><br></pre></td></tr></table></figure>



<p>基本的Hibernate的使用就是这样了。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">皮皮鲲</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/06/26/Hibernate%E7%AE%80%E5%8D%95%E5%AE%9E%E7%94%A8/">http://yoursite.com/2020/06/26/Hibernate简单实用/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">皮之鲲</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hibernate/">Hibernate</a></div><div class="post_share"><div class="social-share" data-image="/../img/struts.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/weixin.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/zhifubao.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/26/Struts%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"><img class="prev_cover" src="/../img/struts.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Struts简单使用</div></div></a></div><div class="next-post pull_right"><a href="/2020/06/20/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%89%A7%E8%A1%8C%E9%98%B6%E6%AE%B5/"><img class="next_cover" src="/../img/xit.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">软件测试执行阶段</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'BVqi9nJrlXzsupGOWSBGzwpz-gzGzoHsz',
  appKey: 'zEwvVmfRSf4Lx232SwkVIFxH',
  notify: false,
  verify: false,
  placeholder: '请输入你的评论',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '//i0.hdslb.com/bfs/emote/',
  emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"},
  enableQQ: true,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(/../img/hibernate.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By 皮皮鲲</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://xzlaptt.github.io/" target="_blank" rel="noopener">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="/js/third-party/ClickShowText.js"></script><script src="https://player.lmih.cn/player/js/player.js" id="myhk" key="159192884410" m="1"></script><script src="/js/background.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>